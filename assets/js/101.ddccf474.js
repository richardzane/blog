(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{673:function(e,a,t){"use strict";t.r(a);var s=t(17),r=Object(s.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"第三方登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第三方登录"}},[e._v("#")]),e._v(" 第三方登录")]),e._v(" "),t("p",[e._v("用户点击“登录”，弹出一个菜单。使用 mui.on() 方法给。这里的菜单用的是 mui 提供的 popover 弹出菜单。菜单包括几个常见的第三方登录方式的按钮，比如 qq登录、微信登录、微博登录。这个用户点击某个按钮，跳转到第三方登录的授权页面，在确认授权之后，可以获取到用户信息，跳转回当前页面，这样就实现了第三方登录。")]),e._v(" "),t("p",[e._v("一开始进入页面，根据 html5plus 提供的api，使用 plus.oauth.getSerivices() 方法获取 services 登录鉴权列表，它是一个数组，包括了许多的 authService 登录服务鉴权对象。这个 authService 鉴权对象十分重要，它拥有很多实用的属性和方法，是实现第三方登录的关键。")]),e._v(" "),t("p",[e._v("遍历刚才获取到的 services 登录鉴权对象，构建一个模板字符串 html，里面包括了第三方登录的按钮，")]),e._v(" "),t("p",[e._v("给三个按钮添加事件，触摸的时候，获取当前按钮的 id 属性值。根据这个 id ，使用 services.find() 方法去寻找对应的 authService 鉴权对象，调用 authService 鉴权对象的 login() 方法，此时会跳转到第三方授权的界面，在第三方界面确认授权成功之后，就会执行 login() 方法的成功回调函数。此时在 login() 方法的成功回调函数里面，使用 authService.getUserInfo() 方法，获取用户信息数据，保存到 localStorage 中，隐藏登录按钮，显示用户信息，关闭弹出菜单。这样就实现了第三方登录。")]),e._v(" "),t("hr"),e._v(" "),t("h1",{attrs:{id:"查看违章高发地-显示地图-取消地图全屏"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看违章高发地-显示地图-取消地图全屏"}},[e._v("#")]),e._v(" 查看违章高发地（显示地图，取消地图全屏）")]),e._v(" "),t("p",[e._v("想要在当前页面显示地图，根据 html5plus 提供的 api，使用 plus.map.Map() 方法 new 一个对象即可（传入一个 dom 节点）。当时会发现使用了这个方法之后，页面仍然没办法显示地图，实际上显示地图肯定没这么简单，需要常见的地图服务方提供支持。首先要去百度地图平台申请一个 sdk，拿到地图的 appkey 应用密钥，有区分是 android 还是 ios 端的密钥。然后打开 manifest.json 文件，它里面有个模块配置，找到 maps 地图模块，勾选百度地图，然后把刚才拿到的 appkey 应用密钥填写到对应的位置。保存配置，重新运行模拟器，地图显示就生效了。")]),e._v(" "),t("p",[e._v("但是注意此时显示的地图是全屏的，顶部的状态栏返回按钮都被覆盖了。需要解决这个问题，需要使用 plus.webiew.create() 方法创建一个子页面，设置绝对定位，距离顶部 100px ，将这个子页面使用 append() 方法追加到当前页面。获取当前页面使用 plus.webiew.currentWebview() 方法。")]),e._v(" "),t("hr"),e._v(" "),t("h1",{attrs:{id:"查看附近加油站-标注显示图标和气泡描述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看附近加油站-标注显示图标和气泡描述"}},[e._v("#")]),e._v(" 查看附近加油站（标注显示图标和气泡描述）")]),e._v(" "),t("ul",[t("li",[e._v("使用 plus.maps.Map() 方法创建地图对象 map。")]),e._v(" "),t("li",[e._v("使用 map.isShowUserLocation() 方法显示当前用户的位置。")]),e._v(" "),t("li",[e._v("使用 map.getUserLocation() 方法获取当前位置的精度和维度。")]),e._v(" "),t("li",[e._v("把精度和维度作为参数，使用 plus.maps.Point() 方法 ，创建一个 point 点。")]),e._v(" "),t("li",[e._v("把 point 点作为参数，使用 map.setCenter() 方法设置地图的中心点。")]),e._v(" "),t("li",[e._v("把 appkey 密钥，longitude 精度，latitude 维度作为参数，想后台发送请求，获取到附近加油站的数组，每个元素是加油站的具体信息，包括精度、维度、加油站的名称，加油站的地址。")]),e._v(" "),t("li",[e._v("首先使用 plus.maps.Marker(new plus.maps.Point())方法创建一个 marker 标注对象，使用 marker.setIcon() 方法设置图标，使用 plus.maps.Bubble() 方法设置一个 bubble 气泡，使用 markert.setBubble() 方法设置气泡。")]),e._v(" "),t("li",[e._v("使用 map.addOverlay(marker) 方法将标注加入当前地图。")])]),e._v(" "),t("hr"),e._v(" "),t("h1",{attrs:{id:"查询驾照违章扣分情况"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查询驾照违章扣分情况"}},[e._v("#")]),e._v(" 查询驾照违章扣分情况")]),e._v(" "),t("p",[e._v("输入驾驶证号、档案编号、证件姓名，向后台发送请求，即可获取违章扣分情况。")]),e._v(" "),t("hr")])}),[],!1,null,null,null);a.default=r.exports}}]);